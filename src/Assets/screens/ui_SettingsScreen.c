// This file was generated by SquareLine Studio
// SquareLine Studio version: SquareLine Studio 1.5.4
// LVGL version: 9.2.2
// Project name: VEX_Runtime_UI

#include "../include/ui.h"
#include <stdlib.h>

lv_obj_t * ui_SettingsScreen = NULL;
lv_obj_t * ui_AdjustKp = NULL;
lv_obj_t * ui_KpSlider = NULL;
lv_obj_t * ui_KpLabel = NULL;
lv_obj_t * ui_KpMin = NULL;
lv_obj_t * ui_KpMax = NULL;
lv_obj_t * ui_AdjustKi = NULL;
lv_obj_t * ui_KiSlider = NULL;
lv_obj_t * ui_KiLabel = NULL;
lv_obj_t * ui_KiMin = NULL;
lv_obj_t * ui_KiMax = NULL;
lv_obj_t * ui_AdjustControllerGainsLabel = NULL;
lv_obj_t * ui_GraphSettingsLabel = NULL;
lv_obj_t * ui_GraphSettings = NULL;
lv_obj_t * ui_PlotUCheckbox = NULL;
lv_obj_t * ui_PlotECheckbox = NULL;
lv_obj_t * ui_PlotEncodersCheckbox = NULL;
lv_obj_t * ui_PlotDistanceCheckbox = NULL;
lv_obj_t * ui_YAxisLimitsLabel = NULL;
lv_obj_t * ui_YAxisMinDropDown = NULL;
lv_obj_t * ui_YAxisMaxDropdown = NULL;
lv_obj_t * ui_ToLabel = NULL;
lv_obj_t * ui_BackToMainButton = NULL;
lv_obj_t * ui_GoBackLabel = NULL;
// Custom Variables
int current_y_min = 0;
int current_y_max = 100;

// event functions
void ui_event_BackToMainButton(lv_event_t * e)
{
    lv_event_code_t event_code = lv_event_get_code(e);

    if(event_code == LV_EVENT_CLICKED) {
        _ui_screen_change(&ui_MainScreen, LV_SCR_LOAD_ANIM_FADE_ON, 0, 0, &ui_MainScreen_screen_init);
    }
}

// Show/Hide control effort series
void ui_event_PlotUCheckbox(lv_event_t * e)
{
    lv_obj_t * obj = lv_event_get_target(e);
    bool checked = lv_obj_has_state(obj, LV_STATE_CHECKED);
    lv_chart_set_series_color(ui_Chart, series_U, checked ? lv_color_hex(0xFF0000) : lv_color_hex(0x00000000)); //Red
}
// Show/Hide error series
void ui_event_PlotECheckbox(lv_event_t * e)
{
    lv_obj_t * obj = lv_event_get_target(e);
    bool checked = lv_obj_has_state(obj, LV_STATE_CHECKED);
    lv_chart_set_series_color(ui_Chart, series_E, checked ? lv_color_hex(0x00FF00) : lv_color_hex(0x00000000)); //Green
}
// Show/Hide encoder series
void ui_event_PlotEncodersCheckbox(lv_event_t * e)
{
    lv_obj_t * obj = lv_event_get_target(e);
    bool checked = lv_obj_has_state(obj, LV_STATE_CHECKED);
    lv_chart_set_series_color(ui_Chart, series_Enc, checked ? lv_color_hex(0x0000FF) : lv_color_hex(0x00000000)); //Blue
}
// Show/Hide distance series
void ui_event_PlotDistanceCheckbox(lv_event_t * e)
{
    lv_obj_t * obj = lv_event_get_target(e);
    bool checked = lv_obj_has_state(obj, LV_STATE_CHECKED);
    lv_chart_set_series_color(ui_Chart, series_Dist, checked ? lv_color_hex(0xFFFFFF) : lv_color_hex(0x00000000)); //White
}

//Set minimum Y-Axis limit
void ui_event_YAxisMinDropdown(lv_event_t * e) {
    lv_obj_t * obj = lv_event_get_target(e);

    // Selected text from dropdown
    char txt[8];
    lv_dropdown_get_selected_str(obj, txt, 8);
    if (txt == NULL) return;

    // Convert to integer
    current_y_min = atoi(txt);

    // Update chart range — keep current max
    lv_chart_set_range(ui_Chart, LV_CHART_AXIS_PRIMARY_Y, current_y_min, current_y_max);
    update_y_axis(current_y_min, current_y_max);
}

//Set maximum Y-Axis limit
void ui_event_YAxisMaxDropdown(lv_event_t * e) {
    lv_obj_t * obj = lv_event_get_target(e);

    // Selected text from dropdown
    char txt[8];
    lv_dropdown_get_selected_str(obj, txt, 8);
    if (txt == NULL) return;

    // Convert to integer
    current_y_max = atoi(txt);

    // Update chart range — keep current min
    update_y_axis(current_y_min, current_y_max);
}

// build functions

void ui_SettingsScreen_screen_init(void)
{
    ui_SettingsScreen = lv_obj_create(NULL);
    lv_obj_remove_flag(ui_SettingsScreen, LV_OBJ_FLAG_SCROLLABLE);      /// Flags
    lv_obj_set_style_bg_color(ui_SettingsScreen, lv_color_hex(0x1F1F1F), LV_PART_MAIN | LV_STATE_DEFAULT);
    lv_obj_set_style_bg_opa(ui_SettingsScreen, 255, LV_PART_MAIN | LV_STATE_DEFAULT);

    ui_AdjustKp = lv_obj_create(ui_SettingsScreen);
    lv_obj_remove_style_all(ui_AdjustKp);
    lv_obj_set_width(ui_AdjustKp, 240);
    lv_obj_set_height(ui_AdjustKp, 60);
    lv_obj_set_x(ui_AdjustKp, 0);
    lv_obj_set_y(ui_AdjustKp, 45);
    lv_obj_remove_flag(ui_AdjustKp, LV_OBJ_FLAG_CLICKABLE | LV_OBJ_FLAG_SCROLLABLE);      /// Flags

    ui_KpSlider = lv_slider_create(ui_AdjustKp);
    lv_slider_set_value(ui_KpSlider, 0, LV_ANIM_OFF);
    if(lv_slider_get_mode(ui_KpSlider) == LV_SLIDER_MODE_RANGE) lv_slider_set_left_value(ui_KpSlider, 0, LV_ANIM_OFF);
    lv_obj_set_width(ui_KpSlider, 128);
    lv_obj_set_height(ui_KpSlider, 10);
    lv_obj_set_align(ui_KpSlider, LV_ALIGN_CENTER);

    //Compensating for LVGL9.1 draw crash with bar/slider max value when top-padding is nonzero and right-padding is 0
    if(lv_obj_get_style_pad_top(ui_KpSlider, LV_PART_MAIN) > 0) lv_obj_set_style_pad_right(ui_KpSlider,
                                                                                               lv_obj_get_style_pad_right(ui_KpSlider, LV_PART_MAIN) + 1, LV_PART_MAIN);
    ui_KpLabel = lv_label_create(ui_AdjustKp);
    lv_obj_set_width(ui_KpLabel, LV_SIZE_CONTENT);   /// 1
    lv_obj_set_height(ui_KpLabel, LV_SIZE_CONTENT);    /// 1
    lv_obj_set_align(ui_KpLabel, LV_ALIGN_TOP_MID);
    lv_label_set_text(ui_KpLabel, "Adjust Kp");

    ui_KpMin = lv_label_create(ui_AdjustKp);
    lv_obj_set_width(ui_KpMin, LV_SIZE_CONTENT);   /// 1
    lv_obj_set_height(ui_KpMin, LV_SIZE_CONTENT);    /// 1
    lv_obj_set_x(ui_KpMin, 20);
    lv_obj_set_y(ui_KpMin, 0);
    lv_obj_set_align(ui_KpMin, LV_ALIGN_LEFT_MID);
    lv_label_set_text(ui_KpMin, "0.1");

    ui_KpMax = lv_label_create(ui_AdjustKp);
    lv_obj_set_width(ui_KpMax, LV_SIZE_CONTENT);   /// 1
    lv_obj_set_height(ui_KpMax, LV_SIZE_CONTENT);    /// 1
    lv_obj_set_x(ui_KpMax, -30);
    lv_obj_set_y(ui_KpMax, 0);
    lv_obj_set_align(ui_KpMax, LV_ALIGN_RIGHT_MID);
    lv_label_set_text(ui_KpMax, "10");

    ui_AdjustKi = lv_obj_create(ui_SettingsScreen);
    lv_obj_remove_style_all(ui_AdjustKi);
    lv_obj_set_width(ui_AdjustKi, 240);
    lv_obj_set_height(ui_AdjustKi, 60);
    lv_obj_set_x(ui_AdjustKi, 0);
    lv_obj_set_y(ui_AdjustKi, -80);
    lv_obj_set_align(ui_AdjustKi, LV_ALIGN_BOTTOM_LEFT);
    lv_obj_remove_flag(ui_AdjustKi, LV_OBJ_FLAG_CLICKABLE | LV_OBJ_FLAG_SCROLLABLE);      /// Flags

    ui_KiSlider = lv_slider_create(ui_AdjustKi);
    lv_slider_set_value(ui_KiSlider, 0, LV_ANIM_OFF);
    if(lv_slider_get_mode(ui_KiSlider) == LV_SLIDER_MODE_RANGE) lv_slider_set_left_value(ui_KiSlider, 0, LV_ANIM_OFF);
    lv_obj_set_width(ui_KiSlider, 128);
    lv_obj_set_height(ui_KiSlider, 10);
    lv_obj_set_align(ui_KiSlider, LV_ALIGN_CENTER);

    //Compensating for LVGL9.1 draw crash with bar/slider max value when top-padding is nonzero and right-padding is 0
    if(lv_obj_get_style_pad_top(ui_KiSlider, LV_PART_MAIN) > 0) lv_obj_set_style_pad_right(ui_KiSlider,
                                                                                               lv_obj_get_style_pad_right(ui_KiSlider, LV_PART_MAIN) + 1, LV_PART_MAIN);
    ui_KiLabel = lv_label_create(ui_AdjustKi);
    lv_obj_set_width(ui_KiLabel, LV_SIZE_CONTENT);   /// 1
    lv_obj_set_height(ui_KiLabel, LV_SIZE_CONTENT);    /// 1
    lv_obj_set_align(ui_KiLabel, LV_ALIGN_TOP_MID);
    lv_label_set_text(ui_KiLabel, "Adjust Ki\n");

    ui_KiMin = lv_label_create(ui_AdjustKi);
    lv_obj_set_width(ui_KiMin, LV_SIZE_CONTENT);   /// 1
    lv_obj_set_height(ui_KiMin, LV_SIZE_CONTENT);    /// 1
    lv_obj_set_x(ui_KiMin, 20);
    lv_obj_set_y(ui_KiMin, 0);
    lv_obj_set_align(ui_KiMin, LV_ALIGN_LEFT_MID);
    lv_label_set_text(ui_KiMin, "0.1");

    ui_KiMax = lv_label_create(ui_AdjustKi);
    lv_obj_set_width(ui_KiMax, LV_SIZE_CONTENT);   /// 1
    lv_obj_set_height(ui_KiMax, LV_SIZE_CONTENT);    /// 1
    lv_obj_set_x(ui_KiMax, -35);
    lv_obj_set_y(ui_KiMax, 0);
    lv_obj_set_align(ui_KiMax, LV_ALIGN_RIGHT_MID);
    lv_label_set_text(ui_KiMax, "1");

    ui_AdjustControllerGainsLabel = lv_label_create(ui_SettingsScreen);
    lv_obj_set_width(ui_AdjustControllerGainsLabel, LV_SIZE_CONTENT);   /// 1
    lv_obj_set_height(ui_AdjustControllerGainsLabel, LV_SIZE_CONTENT);    /// 1
    lv_obj_set_x(ui_AdjustControllerGainsLabel, 35);
    lv_obj_set_y(ui_AdjustControllerGainsLabel, 15);
    lv_label_set_text(ui_AdjustControllerGainsLabel, "Adjust Controller Gains:");

    ui_GraphSettingsLabel = lv_label_create(ui_SettingsScreen);
    lv_obj_set_width(ui_GraphSettingsLabel, LV_SIZE_CONTENT);   /// 1
    lv_obj_set_height(ui_GraphSettingsLabel, LV_SIZE_CONTENT);    /// 1
    lv_obj_set_x(ui_GraphSettingsLabel, -60);
    lv_obj_set_y(ui_GraphSettingsLabel, 15);
    lv_obj_set_align(ui_GraphSettingsLabel, LV_ALIGN_TOP_RIGHT);
    lv_label_set_text(ui_GraphSettingsLabel, "Graph Settings:");

    ui_GraphSettings = lv_obj_create(ui_SettingsScreen);
    lv_obj_remove_style_all(ui_GraphSettings);
    lv_obj_set_width(ui_GraphSettings, 240);
    lv_obj_set_height(ui_GraphSettings, 180);
    lv_obj_set_x(ui_GraphSettings, 0);
    lv_obj_set_y(ui_GraphSettings, 15);
    lv_obj_set_align(ui_GraphSettings, LV_ALIGN_RIGHT_MID);
    lv_obj_remove_flag(ui_GraphSettings, LV_OBJ_FLAG_CLICKABLE | LV_OBJ_FLAG_SCROLLABLE);      /// Flags

    ui_PlotUCheckbox = lv_checkbox_create(ui_GraphSettings);
    lv_checkbox_set_text(ui_PlotUCheckbox, "Plot Control Effort");
    lv_obj_set_width(ui_PlotUCheckbox, LV_SIZE_CONTENT);   /// 1
    lv_obj_set_height(ui_PlotUCheckbox, LV_SIZE_CONTENT);    /// 1
    lv_obj_set_x(ui_PlotUCheckbox, 20);
    lv_obj_set_y(ui_PlotUCheckbox, 0);
    lv_obj_add_flag(ui_PlotUCheckbox, LV_OBJ_FLAG_SCROLL_ON_FOCUS);     /// Flags

    ui_PlotECheckbox = lv_checkbox_create(ui_GraphSettings);
    lv_checkbox_set_text(ui_PlotECheckbox, "Plot Error");
    lv_obj_set_width(ui_PlotECheckbox, LV_SIZE_CONTENT);   /// 1
    lv_obj_set_height(ui_PlotECheckbox, LV_SIZE_CONTENT);    /// 1
    lv_obj_set_x(ui_PlotECheckbox, 20);
    lv_obj_set_y(ui_PlotECheckbox, 30);
    lv_obj_add_flag(ui_PlotECheckbox, LV_OBJ_FLAG_SCROLL_ON_FOCUS);     /// Flags

    ui_PlotEncodersCheckbox = lv_checkbox_create(ui_GraphSettings);
    lv_checkbox_set_text(ui_PlotEncodersCheckbox, "Plot Encoders");
    lv_obj_set_width(ui_PlotEncodersCheckbox, LV_SIZE_CONTENT);   /// 1
    lv_obj_set_height(ui_PlotEncodersCheckbox, LV_SIZE_CONTENT);    /// 1
    lv_obj_set_x(ui_PlotEncodersCheckbox, 20);
    lv_obj_set_y(ui_PlotEncodersCheckbox, 60);
    lv_obj_add_flag(ui_PlotEncodersCheckbox, LV_OBJ_FLAG_SCROLL_ON_FOCUS);     /// Flags

    ui_PlotDistanceCheckbox = lv_checkbox_create(ui_GraphSettings);
    lv_checkbox_set_text(ui_PlotDistanceCheckbox, "Plot Sonar Distance");
    lv_obj_set_width(ui_PlotDistanceCheckbox, LV_SIZE_CONTENT);   /// 1
    lv_obj_set_height(ui_PlotDistanceCheckbox, LV_SIZE_CONTENT);    /// 1
    lv_obj_set_x(ui_PlotDistanceCheckbox, 20);
    lv_obj_set_y(ui_PlotDistanceCheckbox, 90);
    lv_obj_add_flag(ui_PlotDistanceCheckbox, LV_OBJ_FLAG_SCROLL_ON_FOCUS);     /// Flags

    ui_YAxisLimitsLabel = lv_label_create(ui_GraphSettings);
    lv_obj_set_width(ui_YAxisLimitsLabel, LV_SIZE_CONTENT);   /// 1
    lv_obj_set_height(ui_YAxisLimitsLabel, LV_SIZE_CONTENT);    /// 1
    lv_obj_set_x(ui_YAxisLimitsLabel, 0);
    lv_obj_set_y(ui_YAxisLimitsLabel, -45);
    lv_obj_set_align(ui_YAxisLimitsLabel, LV_ALIGN_BOTTOM_MID);
    lv_label_set_text(ui_YAxisLimitsLabel, "Y Axis Limits");

    ui_YAxisMinDropDown = lv_dropdown_create(ui_GraphSettings);
    lv_dropdown_set_options(ui_YAxisMinDropDown,
                            "0\n10\n20\n30\n40\n50\n60\n70\n80\n90\n100\n200\n300\n400\n500\n1000\n2000");
    lv_obj_set_width(ui_YAxisMinDropDown, 80);
    lv_obj_set_height(ui_YAxisMinDropDown, LV_SIZE_CONTENT);    /// 1
    lv_obj_set_x(ui_YAxisMinDropDown, 25);
    lv_obj_set_y(ui_YAxisMinDropDown, 0);
    lv_obj_set_align(ui_YAxisMinDropDown, LV_ALIGN_BOTTOM_LEFT);
    lv_obj_add_flag(ui_YAxisMinDropDown, LV_OBJ_FLAG_SCROLL_ON_FOCUS);     /// Flags

    ui_YAxisMaxDropdown = lv_dropdown_create(ui_GraphSettings);
    lv_dropdown_set_options(ui_YAxisMaxDropdown, "100\n20\n30\n40\n50\n60\n70\n80\n90\n200\n300\n400\n500\n1000\n2000");
    lv_obj_set_width(ui_YAxisMaxDropdown, 80);
    lv_obj_set_height(ui_YAxisMaxDropdown, LV_SIZE_CONTENT);    /// 1
    lv_obj_set_x(ui_YAxisMaxDropdown, -25);
    lv_obj_set_y(ui_YAxisMaxDropdown, 0);
    lv_obj_set_align(ui_YAxisMaxDropdown, LV_ALIGN_BOTTOM_RIGHT);
    lv_obj_add_flag(ui_YAxisMaxDropdown, LV_OBJ_FLAG_SCROLL_ON_FOCUS);     /// Flags

    ui_ToLabel = lv_label_create(ui_GraphSettings);
    lv_obj_set_width(ui_ToLabel, LV_SIZE_CONTENT);   /// 1
    lv_obj_set_height(ui_ToLabel, LV_SIZE_CONTENT);    /// 1
    lv_obj_set_x(ui_ToLabel, 0);
    lv_obj_set_y(ui_ToLabel, -10);
    lv_obj_set_align(ui_ToLabel, LV_ALIGN_BOTTOM_MID);
    lv_label_set_text(ui_ToLabel, "to");

    ui_BackToMainButton = lv_button_create(ui_SettingsScreen);
    lv_obj_set_width(ui_BackToMainButton, 160);
    lv_obj_set_height(ui_BackToMainButton, 50);
    lv_obj_set_x(ui_BackToMainButton, 40);
    lv_obj_set_y(ui_BackToMainButton, -20);
    lv_obj_set_align(ui_BackToMainButton, LV_ALIGN_BOTTOM_LEFT);
    lv_obj_add_flag(ui_BackToMainButton, LV_OBJ_FLAG_SCROLL_ON_FOCUS);     /// Flags
    lv_obj_remove_flag(ui_BackToMainButton, LV_OBJ_FLAG_SCROLLABLE);      /// Flags
    lv_obj_set_style_bg_color(ui_BackToMainButton, lv_color_hex(0x2F2F2F), LV_PART_MAIN | LV_STATE_DEFAULT);
    lv_obj_set_style_bg_opa(ui_BackToMainButton, 255, LV_PART_MAIN | LV_STATE_DEFAULT);
    lv_obj_set_style_border_color(ui_BackToMainButton, lv_color_hex(0x2095F6), LV_PART_MAIN | LV_STATE_DEFAULT);
    lv_obj_set_style_border_opa(ui_BackToMainButton, 255, LV_PART_MAIN | LV_STATE_DEFAULT);
    lv_obj_set_style_border_width(ui_BackToMainButton, 2, LV_PART_MAIN | LV_STATE_DEFAULT);

    ui_GoBackLabel = lv_label_create(ui_BackToMainButton);
    lv_obj_set_width(ui_GoBackLabel, LV_SIZE_CONTENT);   /// 1
    lv_obj_set_height(ui_GoBackLabel, LV_SIZE_CONTENT);    /// 1
    lv_obj_set_align(ui_GoBackLabel, LV_ALIGN_CENTER);
    lv_label_set_text(ui_GoBackLabel, "Go Back");

    lv_obj_add_event_cb(ui_BackToMainButton, ui_event_BackToMainButton, LV_EVENT_ALL, NULL);

    // Event callbacks for graph series checkboxes
    lv_obj_add_event_cb(ui_PlotUCheckbox, ui_event_PlotUCheckbox, LV_EVENT_ALL, NULL);
    lv_obj_add_event_cb(ui_PlotECheckbox, ui_event_PlotECheckbox, LV_EVENT_ALL, NULL);
    lv_obj_add_event_cb(ui_PlotEncodersCheckbox, ui_event_PlotEncodersCheckbox, LV_EVENT_ALL, NULL);
    lv_obj_add_event_cb(ui_PlotDistanceCheckbox, ui_event_PlotDistanceCheckbox, LV_EVENT_ALL, NULL);
    // Event callbacks for Y-Axis limit dropdowns
    lv_obj_add_event_cb(ui_YAxisMinDropDown, ui_event_YAxisMinDropdown, LV_EVENT_ALL, NULL);
    lv_obj_add_event_cb(ui_YAxisMaxDropdown, ui_event_YAxisMaxDropdown, LV_EVENT_ALL, NULL);
}

void ui_SettingsScreen_screen_destroy(void)
{
    if(ui_SettingsScreen) lv_obj_del(ui_SettingsScreen);

    // NULL screen variables
    ui_SettingsScreen = NULL;
    ui_AdjustKp = NULL;
    ui_KpSlider = NULL;
    ui_KpLabel = NULL;
    ui_KpMin = NULL;
    ui_KpMax = NULL;
    ui_AdjustKi = NULL;
    ui_KiSlider = NULL;
    ui_KiLabel = NULL;
    ui_KiMin = NULL;
    ui_KiMax = NULL;
    ui_AdjustControllerGainsLabel = NULL;
    ui_GraphSettingsLabel = NULL;
    ui_GraphSettings = NULL;
    ui_PlotUCheckbox = NULL;
    ui_PlotECheckbox = NULL;
    ui_PlotEncodersCheckbox = NULL;
    ui_PlotDistanceCheckbox = NULL;
    ui_YAxisLimitsLabel = NULL;
    ui_YAxisMinDropDown = NULL;
    ui_YAxisMaxDropdown = NULL;
    ui_ToLabel = NULL;
    ui_BackToMainButton = NULL;
    ui_GoBackLabel = NULL;

}
